{
  "active": true,
  "interval": 3600,
  "name": "Проверка on-demand с секретами",
  "parameters": {
    "pw_script": "const { test, expect } = require('@playwright/test');\n\ntest('Выполнение кастомного чека с секретом', async ({ request }) => {\n  const headers = {\n    'Authorization': process.env.PINGERA_API_KEY,\n    'Content-Type': 'application/json'\n  };\n\n  const secretValue = process.env.PINGERA_TEST_SECRET_VALUE; // Получаем значение из секрета\n\n  expect(secretValue).toBeDefined();\n\n  // В этом примере мы отправляем secretValue на эхо-эндпоинт для проверки\n  // В реальной жизни, вы бы использовали его для аутентификации\n  const response = await request.post('https://api.pingera.ru/v1/echo', {\n    headers,\n    data: { secret: secretValue }\n  });\n  \n  expect(response.ok()).toBe(true);\n  const responseBody = await response.json();\n  expect(responseBody.receivedSecret).toBe(secretValue);\n\n  console.log('Секрет успешно передан и проверен в on-demand чеке.');\n});",
    "regions": [
      "RU, Moscow"
    ],
    "retry_enabled": false
  },
  "timeout": 30,
  "type": "multistep",
  "marketplace": {
    "tags": [
      "секреты",
      "on-demand",
      "безопасность",
      "api"
    ],
    "name": "Проверка on-demand с секретами",
    "description": "Запускает разовую проверку, которая использует секреты организации, чтобы убедиться в их корректной передаче в Playwright скрипт. Требует наличия секретов.",
    "secrets": true
  }
}
